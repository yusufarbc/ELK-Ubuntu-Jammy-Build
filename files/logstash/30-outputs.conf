/*
 Logstash için örnek output yapılandırması. Bu dosyayı logstash/pipeline/30-outputs.conf altında tutun.
 ELASTIC_PASSWORD güvenli bir şekilde sağlanmalıdır (çevresel değişken, secret veya dosya).
*/
output {
  elasticsearch {
    hosts => ["https://localhost:9200"]
    user => "elastic"
    password => "${ELASTIC_PASSWORD}"
    ssl => true
    cacert => "/etc/elasticsearch/certs/http_ca.crt"
    index => "logs-%{[event][dataset]}-%{+YYYY.MM.dd}"
    ilm_enabled => true
    ilm_policy => "logs-30d-delete"
  }

  # İsteğe bağlı: hata ayıklama için dosyaya yaz
  if [@metadata][debug] == "true" {
    file { path => "/var/log/logstash/debug.log" }
  }
}
